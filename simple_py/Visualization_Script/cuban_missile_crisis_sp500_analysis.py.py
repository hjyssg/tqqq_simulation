"""
æœ¬æ–‡ä»¶æ—¨åœ¨åˆ†æå¤å·´å¯¼å¼¹å±æœºï¼ˆ1962å¹´10æœˆ14æ—¥è‡³10æœˆ28æ—¥ï¼‰å‰åç¾å›½è‚¡å¸‚çš„è¡¨ç°ï¼Œ
é€šè¿‡å¯è§†åŒ–å’Œæ•°æ®æ¯”è¾ƒï¼Œè§‚å¯Ÿé‡å¤§åœ°ç¼˜æ”¿æ²»äº‹ä»¶å¯¹å¸‚åœºçš„çŸ­æœŸå½±å“ã€‚
æ•°æ®æ¥æºä¸ºæ ‡å‡†æ™®å°”500æŒ‡æ•°ï¼ˆS&P 500ï¼‰ï¼Œæ ¼å¼ä¸ºCSVã€‚
"""

import pandas as pd
import os
import matplotlib.pyplot as plt
import sys
sys.path.append(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))  # å°†util.pyæ‰€åœ¨çš„ç›®å½•æ·»åŠ åˆ°ç³»ç»Ÿè·¯å¾„ä¸­
import _util

# ä½¿ç”¨ä½ è‡ªå®šä¹‰çš„å‡½æ•°åŠ è½½æ•°æ®
data = _util.load_csv_as_dataframe("^SPX.csv")  # data is a dataframe

# å°†æ—¥æœŸåˆ—è½¬æ¢ä¸ºdatetimeç±»å‹ï¼Œå¹¶è®¾ç½®ä¸ºç´¢å¼•
data['Date'] = pd.to_datetime(data['Date'])
data.set_index('Date', inplace=True)

# ç­›é€‰å¤å·´å¯¼å¼¹å±æœºå‰å 1962å¹´8æœˆ1æ—¥ è‡³ 1962å¹´12æœˆ31æ—¥ çš„æ•°æ®
crisis_start = "1962-08-01"
crisis_end = "1962-12-31"
crisis_data = data.loc[crisis_start:crisis_end]


# é¿å…ä¹±ç 
plt.rcParams['font.sans-serif'] = ['SimHei']  # ç”¨é»‘ä½“æ˜¾ç¤ºä¸­æ–‡
plt.rcParams['axes.unicode_minus'] = False  # æ­£ç¡®æ˜¾ç¤ºè´Ÿå·

# å¯è§†åŒ–Closeä»·æ ¼èµ°åŠ¿
plt.figure(figsize=(12, 6))
plt.plot(crisis_data.index, crisis_data['Close'], label='S&P 500 Close Price', color='blue')
plt.axvline(pd.to_datetime("1962-10-14"), color='red', linestyle='--', label='U-2ä¾¦å¯Ÿç…§ç‰‡å‘ç°å¯¼å¼¹ï¼ˆ10æœˆ14æ—¥ï¼‰')
plt.axvline(pd.to_datetime("1962-10-22"), color='orange', linestyle='--', label='è‚¯å°¼è¿ªå…¨å›½æ¼”è¯´å®£å¸ƒå°é”ï¼ˆ10æœˆ22æ—¥ï¼‰')
plt.axvline(pd.to_datetime("1962-10-28"), color='green', linestyle='--', label='è‹è”å®£å¸ƒæ’¤å›å¯¼å¼¹ï¼ˆ10æœˆ28æ—¥ï¼‰')
plt.title("å¤å·´å¯¼å¼¹å±æœºå‰å S&P 500 æŒ‡æ•°èµ°åŠ¿ï¼ˆ1962å¹´ï¼‰")
plt.xlabel("æ—¥æœŸ")
plt.ylabel("æ”¶ç›˜ä»·")
plt.legend()
plt.grid(True)
plt.tight_layout()
plt.show()

""""
1. å¸®æˆ‘åˆ†æï¼Œæˆ‘è§‰å¾—2025trumpçš„å…¨çƒå…³ç¨å±æœºå’Œå¤å·´æ ¸å¼¹å±æœºå…¶å®å¾ˆæ¥è¿‘ã€‚ä¸–ç•Œä¸€ç¬é—´é™·å…¥æå¤§çš„ä¸ç¡®å®šæ€§ã€‚
2. ä¸ºäº†é¿å…confirmation bias,å°è¯•åé©³æˆ‘ã€‚


å¸‚åœºç»“æ„ä¸åŒï¼š
    1962å¹´å¸‚åœºè¿œæ²¡é‚£ä¹ˆæ•æ„Ÿ
    å½“å¹´è‚¡å¸‚ä»¥æœºæ„é•¿çº¿æŠ•èµ„è€…ä¸ºä¸»ï¼Œäº¤æ˜“é¢‘ç‡ä½ã€ä¿¡æ¯ä¼ é€’æ…¢ï¼Œæ‰€ä»¥å¤å·´å±æœºå¯¹å¸‚åœºçš„å†²å‡»å…¶å®æ˜¯æ¸©å’Œçš„ã€‚
    ä½ å¦‚æœçœ‹1962å¹´10æœˆé‚£æ®µæ—¶é—´çš„S&P 500ï¼Œéœ‡è¡å¹¶æ²¡æœ‰ç‰¹åˆ«å‰§çƒˆï¼Œç”šè‡³ç•¥æœ‰åå¼¹ã€‚
    ä½†2025å¹´ä½ çœ‹åˆ°çš„å¸‚åœºæ³¢åŠ¨å¯èƒ½æºäºï¼š
    é«˜é¢‘äº¤æ˜“ï¼›
    æ–°é—»æƒ…ç»ªè‡ªåŠ¨åŒ–äº¤æ˜“ï¼›
    ETFç»“æ„é£é™©æ‰©æ•£ã€‚
    ğŸ‘‰ æ‰€ä»¥æˆ‘ä»¬ä»Šå¤©çœ‹åˆ°çš„â€œå…¨çƒæš´è·Œâ€ï¼Œæœªå¿…æ˜¯å±æœºæœ¬èº«ä¸¥é‡ï¼Œè€Œæ˜¯äº¤æ˜“ç»“æ„é«˜åº¦æ æ†åŒ–åçš„ååº”è¢«æ”¾å¤§ã€‚

"""